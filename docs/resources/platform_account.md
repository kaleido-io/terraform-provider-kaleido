---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "kaleido_platform_account Resource - terraform-provider-kaleido"
subcategory: ""
description: |-
  A platform account represents a tenant or child account that can be managed independently. Accounts provide isolation and can have their own OIDC configuration, users, and groups.
---

# kaleido_platform_account (Resource)

A platform account represents a tenant or child account that can be managed independently. Accounts provide isolation and can have their own OIDC configuration, users, and groups.

## Example Usage

```terraform
// A simple example of a platform account
resource "kaleido_platform_account" "simple_example" {
  name = "example"
  // This refers to an existing OIDC Client in the platform, configured to login users via a trusted identity provider
  oidc_client_id = "i:abcd1234"
  // This trusted first user will be added to the account on creation, and will have admin access after first login
  first_user_email = "user@example.com"
  // Results in example.${PLATFORM_DOMAIN} for the account FQDN
  hostnames = {
    "example" = []
  }
}

// A more complex example of a platform account with validation policy, user JIT, and bootstrap application
resource "kaleido_platform_account" "robust_example" {
  name             = "example"
  oidc_client_id   = "i:abcd1234"
  first_user_email = "user@example.com"
  hostnames = {
    "example" = []
  }

  // Users matching the validation policy will be automatically "imported" on first login, and added to the 'readers' group if one exists
  user_jit_enabled       = true
  user_jit_default_group = "readers"

  // This validation policy allows only users with either the admin or owner roles to access the account
  validation_policy = <<EOT
package example_validation
import future.keywords.in

default allow := false

is_valid_aud(aud) := aud == "expected_client_id"

is_valid_admin(roles) := roles == ["admin"]

is_valid_owner(roles) := roles == ["owner"]

allow {
	is_valid_aud(input.id_token.aud)
	is_valid_admin(input.id_token.roles)
}

allow {
	is_valid_aud(input.id_token.aud)
	is_valid_owner(input.id_token.roles)
}
EOT
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Unique name of the account

### Optional

- `bootstrap_application_name` (String) Name of the bootstrap application for the account
- `bootstrap_application_oauth_json` (String) OAuth configuration for the bootstrap application
- `bootstrap_application_validation_policy` (String) Validation policy for the bootstrap application
- `first_user_email` (String) Email address of the initial admin user for the new account
- `first_user_sub` (String) OIDC subject identifier of the initial admin user for the new account
- `hostnames` (Map of List of String) Hostname binding map for the account
- `oidc_client_id` (String) ID of an existing OIDC Client to use for authentication
- `user_jit_default_group` (String) Default group to add users to when JIT is enabled
- `user_jit_enabled` (Boolean) Enable Just-In-Time (JIT) user provisioning for the account, requires a validation policy to also be provided.
- `validation_policy` (String) Optional policy for validating the account identity

### Read-Only

- `id` (String) The ID of this resource.

## Import

Import is supported using the following syntax:

```shell
# import accounts by their ID, as they are top-level resources in the API model
tofu import kaleido_platform_account.simple_example "a:1234abcd"
```
